{% extends 'admin_base.html.twig' %}
{% import "navigation.html.twig" as nav %}
{% import "fontawesome.html.twig" as fa %}

{% block title %}
  Gestions Utilisateurs
{% endblock %}

{% block admin_content %}
  <div class="my-5">
    <div class="row">
      <div class="col-auto ms-auto">
        <form action="" method="get">
          <div class="input-group">
            <input type="text" name="search" id="search" class="form-control" placeholder="Rechercher...">
            <button type="submit" class="btn btn-outline-primary">
              {{ fa.icon('magnifying-glass') }}
            </button>
          </div>
        </form>
      </div>
      <div class="col-auto">
        {{ nav.paginator(pages, page, 'app_admin_user_index') }}
      </div>
    </div>
    <div class="table-responsive border rounded">
      <table class="table table-striped mb-0">
        <thead class="table-bordered">
          <tr>
            <th>id</th>
            <th>Nom</th>
            <th>Pr√©nom</th>
            <th>Adresse email</th>
            <th>Entreprise</th>
            <th>Poste</th>
            <th>Inscription</th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody class="align-middle">
          {% for user in users %}
            <tr>
              <td>{{ user.id }}</td>
              <td>{{ user.lastname }}</td>
              <td>{{ user.firstname }}</td>
              <td>{{ user.email }}</td>
              <td>{{ user.company }}</td>
              <td>{{ user.jobTitle }}</td>
              <td>{{ user.createdAt|date('d-m-Y') }}</td>
              <td>
                <span class="badge text-bg-{{ user.statusColor}}">{{ user.statusLabel }}</span>
              </td>
              <td class="d-flex align-items-center gap-1">
                <a class="link-primary" href="{{ path('app_admin_user_edit', { id: user.id }) }}">
                  <i class="fa-duotone fa-regular fa-pen-to-square"></i>
                </a>
                {% include 'admin/user/_delete.html.twig' %}

                <div class="btn-group" role="group" aria-label="Button group with nested dropdown">
                  <a class="btn btn-sm btn-primary" href="{{ path('app_admin_user_approve', { id: user.id }) }}">
                    <i class="fa-duotone fa-regular fa-check fa-swap-opacity"></i>
                    Accepter
                  </a>
                  <div class="btn-group" role="group">
                    <button type="button" class="btn btn-sm btn-primary dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false"></button>
                    <ul class="dropdown-menu">
                      <li>
                        <a class="dropdown-item" href="{{ path('app_admin_user_reject', { id: user.id }) }}">
                          <i class="fa-duotone fa-regular fa-xmark fa-swap-opacity fa-fw"></i>
                          Rejeter
                        </a>
                      </li>
                    </ul>
                  </div>
                </div>
              </td>
            </tr>
          {% else %}
            <tr>
              <td colspan="9" class="text-center">Aucun utilisateur</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
{% endblock %}
